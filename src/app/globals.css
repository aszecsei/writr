@import "tailwindcss";
@plugin "@tailwindcss/typography";
@custom-variant dark (&:where(.dark, .dark *));

:root {
  --background: #ffffff;
  --foreground: #171717;

  /* Primary color (default: blue) */
  --primary-50: #eff6ff;
  --primary-100: #dbeafe;
  --primary-200: #bfdbfe;
  --primary-300: #93c5fd;
  --primary-400: #60a5fa;
  --primary-500: #3b82f6;
  --primary-600: #2563eb;
  --primary-700: #1d4ed8;
  --primary-800: #1e40af;
  --primary-900: #1e3a8a;
  --primary-950: #172554;

  /* Neutral color (default: zinc) */
  --neutral-50: #fafafa;
  --neutral-100: #f4f4f5;
  --neutral-200: #e4e4e7;
  --neutral-300: #d4d4d8;
  --neutral-400: #a1a1aa;
  --neutral-500: #71717a;
  --neutral-600: #52525b;
  --neutral-700: #3f3f46;
  --neutral-800: #27272a;
  --neutral-900: #18181b;
  --neutral-950: #09090b;

  /* Editor content width */
  --editor-content-width: 720px;

  /* Density variables (comfortable defaults) */
  --density-item-py: 0.5rem;
  --density-button-py: 0.5rem;
  --density-gap: 0.5rem;
}

[data-density="compact"] {
  --density-item-py: 0.25rem;
  --density-button-py: 0.25rem;
  --density-gap: 0.25rem;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);

  /* Primary color scale */
  --color-primary-50: var(--primary-50);
  --color-primary-100: var(--primary-100);
  --color-primary-200: var(--primary-200);
  --color-primary-300: var(--primary-300);
  --color-primary-400: var(--primary-400);
  --color-primary-500: var(--primary-500);
  --color-primary-600: var(--primary-600);
  --color-primary-700: var(--primary-700);
  --color-primary-800: var(--primary-800);
  --color-primary-900: var(--primary-900);
  --color-primary-950: var(--primary-950);

  /* Neutral color scale */
  --color-neutral-50: var(--neutral-50);
  --color-neutral-100: var(--neutral-100);
  --color-neutral-200: var(--neutral-200);
  --color-neutral-300: var(--neutral-300);
  --color-neutral-400: var(--neutral-400);
  --color-neutral-500: var(--neutral-500);
  --color-neutral-600: var(--neutral-600);
  --color-neutral-700: var(--neutral-700);
  --color-neutral-800: var(--neutral-800);
  --color-neutral-900: var(--neutral-900);
  --color-neutral-950: var(--neutral-950);

  /* Editor max-width (--container-* maps to max-w-*) */
  --container-editor: var(--editor-content-width);
}

@utility py-density-item {
  padding-top: var(--density-item-py);
  padding-bottom: var(--density-item-py);
}

@utility py-density-button {
  padding-top: var(--density-button-py);
  padding-bottom: var(--density-button-py);
}

@utility gap-density {
  gap: var(--density-gap);
}

.dark {
  --background: #0a0a0a;
  --foreground: #ededed;
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Geist, Arial, Helvetica, sans-serif;
}

button,
[role="button"],
select,
summary {
  cursor: pointer;
}

button:disabled,
select:disabled {
  cursor: default;
}

.ProseMirror:focus {
  outline: none;
}

/* Nested list styling for ProseMirror */
.ProseMirror ul,
.ProseMirror ol {
  padding-left: 1.5em;
}

.ProseMirror ul ul,
.ProseMirror ol ol,
.ProseMirror ul ol,
.ProseMirror ol ul {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

.ProseMirror li > ul,
.ProseMirror li > ol {
  margin-left: 0;
}

.ProseMirror li p {
  margin: 0;
}

.selection-preserved {
  background-color: rgba(59, 130, 246, 0.3);
  border-radius: 2px;
}
.dark .selection-preserved {
  background-color: rgba(96, 165, 250, 0.25);
}

/* Panel resize handles */
.resize-handle {
  width: 0;
  position: relative;
}

.resize-handle::before {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  left: -3px;
  right: -3px;
  cursor: col-resize;
  z-index: 10;
}

.resize-handle:hover::before,
.resize-handle:active::before {
  background-color: var(--color-neutral-400);
}

.dark .resize-handle:hover::before,
.dark .resize-handle:active::before {
  background-color: var(--color-neutral-600);
}

/* Comment highlights */
.comment-highlight {
  border-radius: 2px;
  cursor: pointer;
  border-bottom: 2px solid currentColor;
}

.comment-highlight-yellow {
  background-color: rgba(250, 204, 21, 0.4);
  border-bottom-color: rgb(234, 179, 8);
}
.comment-highlight-blue {
  background-color: rgba(96, 165, 250, 0.4);
  border-bottom-color: rgb(59, 130, 246);
}
.comment-highlight-green {
  background-color: rgba(74, 222, 128, 0.4);
  border-bottom-color: rgb(34, 197, 94);
}
.comment-highlight-red {
  background-color: rgba(248, 113, 113, 0.4);
  border-bottom-color: rgb(239, 68, 68);
}
.comment-highlight-purple {
  background-color: rgba(192, 132, 252, 0.4);
  border-bottom-color: rgb(168, 85, 247);
}

.dark .comment-highlight-yellow {
  background-color: rgba(250, 204, 21, 0.25);
}
.dark .comment-highlight-blue {
  background-color: rgba(96, 165, 250, 0.25);
}
.dark .comment-highlight-green {
  background-color: rgba(74, 222, 128, 0.25);
}
.dark .comment-highlight-red {
  background-color: rgba(248, 113, 113, 0.25);
}
.dark .comment-highlight-purple {
  background-color: rgba(192, 132, 252, 0.25);
}

/* Comment markers (point comments) */
.comment-marker {
  display: inline-block;
  width: 2px;
  height: 1.3em;
  margin: 0 1px;
  border-radius: 1px;
  cursor: pointer;
  vertical-align: text-bottom;
}

.comment-marker-yellow {
  background-color: rgb(234, 179, 8);
}
.comment-marker-blue {
  background-color: rgb(59, 130, 246);
}
.comment-marker-green {
  background-color: rgb(34, 197, 94);
}
.comment-marker-red {
  background-color: rgb(239, 68, 68);
}
.comment-marker-purple {
  background-color: rgb(168, 85, 247);
}

/* Ruby text styling */
ruby {
  ruby-position: over;
}

ruby rt {
  font-size: 0.5em;
  /* Use neutral variable with explicit RGB fallback for html2canvas */
  color: var(--neutral-500, rgb(113, 113, 122));
}

.dark ruby rt {
  color: var(--neutral-400, rgb(161, 161, 170));
}

/* Spellcheck styling */
.spelling-error {
  text-decoration: underline wavy;
  text-decoration-color: rgb(239, 68, 68);
  text-underline-offset: 2px;
  cursor: pointer;
}

.spelling-error-active {
  background-color: rgba(239, 68, 68, 0.2);
  border-radius: 2px;
}
